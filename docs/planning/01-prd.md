# PRD (제품 요구사항 정의서)

> 경기도의회 실시간 자막 서비스

---

## MVP 캡슐

| # | 항목 | 내용 |
|---|------|------|
| 1 | 목표 | 경기도의회 회의 영상에 실시간 자막을 제공하여 모니터링 부담을 줄이고 빠른 내용 파악 지원 |
| 2 | 페르소나 | 경기도의회 직원 (회의록 정리/요약 담당) |
| 3 | 핵심 기능 | FEAT-1: 실시간 자막, FEAT-2: 키워드 검색, FEAT-3: VOD 자막 |
| 4 | 성공 지표 (노스스타) | 자막 지연 5초 이내, 의회용어/의원이름 정확도 90%+ |
| 5 | 입력 지표 | 일일 사용 시간, 검색 활용 빈도 |
| 6 | 비기능 요구 | 5명 동시 접속, 응답 시간 < 2초 |
| 7 | Out-of-scope | AI 자동 요약, 화자 기반 영상 편집 (v2) |
| 8 | Top 리스크 | HLS 스트림에서 오디오 추출 실패 |
| 9 | 완화/실험 | 공개 API 먼저 테스트, 관리자 협조 요청 백업 |
| 10 | 다음 단계 | HLS 스트림 오디오 추출 PoC |

---

## 1. 문제 정의

### 1.1 현재 상황 (As-Is)

경기도의회에서 본회의나 상임위원회가 열리면:
- **여러 직원이 실시간 스트리밍을 동시에 모니터링**해야 함 (중복 업무)
- **3시간 이상 긴 회의**에서 특정 발언을 찾으려면 전체 영상을 다시 봐야 함
- **공식 회의록**이 늦게 나와 후속 업무가 지연됨

### 1.2 목표 상황 (To-Be)

- 실시간 자막으로 **텍스트만 보고도 회의 흐름 파악** 가능
- **키워드 검색**으로 특정 발언 시점 즉시 찾기
- 공식 회의록 전에 **빠른 내부 정리** 가능

### 1.3 왜 지금인가? (Why Now)

- OpenAI Whisper API의 한국어 정확도가 실용 수준에 도달
- 조직 내 디지털 혁신 필요성 증가
- 직원 업무 부담 해소 필요

---

## 1.5 벤치마킹 분석 (필수!)

### 유사 서비스 분석

| # | 서비스명 | 핵심 기능 | 성공/실패 요인 | 우리와의 차이점 |
|---|----------|----------|---------------|---------------|
| 1 | Naver Clova Note | 회의록 자동 작성 | 높은 한국어 정확도 | 외부 스트림 연동 불가 |
| 2 | 다글로 | 실시간 자막/번역 | 간편한 사용성 | 특정 도메인 용어 미지원 |
| 3 | MS Teams | 실시간 자막 내장 | 플랫폼 종속성 | 경기도의회 스트림 미지원 |

### 차별화 포인트

| 항목 | 경쟁사 | 우리 | 왜 더 나은가? |
|------|--------|------|-------------|
| 스트림 연동 | 자체 플랫폼만 | live.ggc.go.kr 직접 연동 | 기존 업무 흐름 유지 |
| 도메인 특화 | 일반 용어 | 의회용어/의원이름 사전 | 정확도 향상 |
| 확장성 | 제한적 | 회의록 자동화, 영상 편집 | 내부 도구화 가능 |

### 킬러 질문 대응
> "네이버/카카오가 내일 똑같은 걸 만들면?"

경기도의회 스트림 직접 연동, 의회 전용 용어 사전, 내부 시스템 연계는 범용 서비스가 제공하기 어려움.
조직 맞춤형 도구로서의 가치가 있음.

---

## 2. 사용자 페르소나

### 2.1 주요 페르소나

| 항목 | 내용 |
|------|------|
| 이름/별칭 | "바쁜 직원 김주임" |
| 나이/직업 | 35세 경기도의회 직원 |
| 핵심 니즈 | 회의 내용 빠른 파악 및 정리 |
| 불편 포인트 | 3시간 회의 모니터링, 회의록 대기 |
| 사용 상황 | 본회의 진행 중, 업무 시간 내 |

### 2.2 페르소나의 하루 (시나리오)

1. 09:00 - 오늘 본회의 일정 확인
2. 10:00 - 본회의 시작, 서비스 접속
3. 10:30 - 실시간 자막 보며 다른 업무 병행
4. 12:00 - "예산" 키워드로 검색, 관련 발언 시점 확인
5. 13:00 - 본회의 종료, 자막 기반 요약 정리 시작
6. 15:00 - 상급자에게 빠른 보고

---

## 3. 사용자 스토리

### FEAT-0: 접속/인증
- [ ] 사용자로서, URL 접속만으로 서비스를 사용할 수 있어야 한다. (MVP: 인증 없음)
- [ ] (v2) 사용자로서, 접속 권한 관리가 가능해야 한다.

### FEAT-1: 실시간 자막 (MVP)
- [ ] 직원으로서, 실시간 스트리밍 영상과 자막을 동시에 볼 수 있어야 한다. 왜냐하면 누가 말하는지 확인하면서 내용을 파악해야 하기 때문이다.
- [ ] 직원으로서, 자막이 5초 이내 지연으로 표시되어야 한다. 왜냐하면 실시간 모니터링의 의미가 있어야 하기 때문이다.
- [ ] 직원으로서, 지금까지 나온 자막 히스토리를 스크롤해서 볼 수 있어야 한다. 왜냐하면 놓친 내용을 확인해야 하기 때문이다.
- [ ] 직원으로서, 자막 클릭 시 해당 시점으로 영상이 이동해야 한다. 왜냐하면 특정 발언을 다시 들어야 할 때가 있기 때문이다.

### FEAT-2: 키워드 검색 (MVP)
- [ ] 직원으로서, 자막에서 키워드를 검색하면 하이라이트되어야 한다. 왜냐하면 3시간 회의에서 특정 내용을 빠르게 찾아야 하기 때문이다.

### FEAT-3: VOD 자막 (MVP)
- [ ] 직원으로서, VOD URL을 등록하면 자막이 생성되어야 한다. 왜냐하면 지난 회의도 검색 가능해야 하기 때문이다.
- [ ] 직원으로서, VOD 목록에서 지난 회의를 선택할 수 있어야 한다.

### FEAT-4: 정확도 향상 (MVP)
- [ ] 직원으로서, 의원 이름이 정확하게 인식되어야 한다. 왜냐하면 누가 발언했는지가 중요하기 때문이다.
- [ ] 직원으로서, 의회 전문 용어가 정확하게 인식되어야 한다.

### FEAT-5: AI 요약 (v2)
- [ ] 직원으로서, 회의 전체 요약을 AI가 생성해주어야 한다.

---

## 4. 성공 지표

### 4.1 노스스타 지표 (결과 지표)
| 지표명 | 정의 | 목표치 | 측정 주기 |
|--------|------|--------|----------|
| 자막 지연 시간 | 발언~자막 표시 | < 5초 | 실시간 |
| 인식 정확도 | 의회용어/의원이름 | > 90% | 주간 |

### 4.2 입력 지표 (행동 지표)
| 지표명 | 정의 | 목표치 |
|--------|------|--------|
| 일일 사용 시간 | 서비스 접속 시간 | > 30분/회의 |
| 검색 활용 빈도 | 키워드 검색 횟수 | > 5회/회의 |

---

## 5. 범위 관리

### 5.1 MVP (반드시 포함)
- FEAT-1: 실시간 자막
- FEAT-2: 키워드 검색
- FEAT-3: VOD 자막 등록/재생
- FEAT-4: 의원이름/의회용어 정확도 향상

### 5.2 옵션 (시간 허용 시)
- 자동 화자 분리 (AI Speaker Diarization)

### 5.3 Non-goals (명시적 제외)
- AI 자동 요약 - v2에서 구현
- 화자 기반 영상 편집 - v2에서 구현
- 외부 공개 - 내부 도구로만 사용
- 모바일 앱 - 웹 버전만

---

## 6. 가정과 리스크

### 6.1 가설 vs 사실 (필수!)

| # | 항목 | 분류 | 내용 | 검증 방법 | 검증 상태 |
|---|------|------|------|----------|----------|
| 1 | HLS 스트림 접근 | 🔴 가설 | 공개 URL로 오디오 추출 가능 | PoC 테스트 | ❌ 미검증 |
| 2 | Whisper 정확도 | 🔴 가설 | 한국어 회의 음성 90%+ | 샘플 테스트 | ❌ 미검증 |
| 3 | 5초 지연 가능 | 🔴 가설 | 처리 파이프라인 최적화로 달성 | 성능 테스트 | ❌ 미검증 |
| 4 | VOD URL 존재 | 🟢 사실 | live.ggc.go.kr에서 VOD 제공 | HTML 분석 | ✅ 검증됨 |

### 6.2 핵심 가정
| # | 가정 | 검증 방법 |
|---|------|----------|
| 1 | live.ggc.go.kr HLS 스트림 접근 가능 | cURL 테스트 |
| 2 | OpenAI API 비용 감당 가능 | 비용 시뮬레이션 |

### 6.3 Top 5 리스크 보드

| # | 가정 | 리스크 | 완화 | 트리거 | 대응 |
|---|------|--------|------|--------|------|
| 1 | HLS 접근 | CORS/인증 차단 | 관리자 협조 요청 | 접근 실패 | 관리자에게 내부 API 요청 |
| 2 | 5초 지연 | 처리 시간 초과 | 청크 크기 최적화 | > 10초 | 배치 처리로 전환 |
| 3 | API 비용 | 예상 초과 | 사용량 모니터링 | > $50/월 | 로컬 Whisper 검토 |
| 4 | 정확도 | 용어 오인식 | 프롬프트/사전 보강 | < 80% | GPT 후처리 추가 |
| 5 | 동시접속 | 서버 과부하 | 캐싱, 로드밸런싱 | 지연 증가 | Railway 스케일업 |

---

## 7. 해결 가설과 실험

### 7.1 가설
> 만약 실시간 자막을 5초 이내로 제공하면, 직원들의 모니터링 부담이 크게 줄어들 것이다. 왜냐하면 영상을 보지 않고 텍스트만 훑어봐도 내용 파악이 가능하기 때문이다.

### 7.2 실험 루프

| 단계 | 내용 |
|------|------|
| 실험 | 1회 본회의에서 실시간 자막 사용 |
| 관측 | 자막 지연 시간, 모니터링 인원 수 |
| 학습 | 5초 달성 여부, 업무 효율 향상 체감 |
| 다음 | 검색 기능 활용도 측정 |

---

## 8. 타협 기록 (필수!)

### 8.1 핵심 가치 (절대 타협 불가)
| # | 핵심 가치 | 왜 중요한가? | 현재 점수 (1-10) |
|---|----------|-------------|-----------------|
| 1 | 실시간성 (5초 이내) | 실시간 모니터링 대체가 핵심 목적 | 8 |
| 2 | 정확도 (의원이름) | 누가 발언했는지가 업무상 필수 | 7 |

### 8.2 타협 내역
| # | 원래 계획 | 현재 계획 | 타협 이유 | 복구 계획 |
|---|----------|----------|----------|----------|
| 1 | 로컬 Whisper | OpenAI API | GPU 없음 | GPU 확보 시 로컬 전환 |
| 2 | 자동 화자 분리 | 영상 + 자막 동시 표시 | 기술 복잡도 | v2에서 구현 |
| 3 | AI 요약 | 수동 정리 | MVP 범위 | v2에서 구현 |

---

## 9. 실패 대응 계획 (필수!)

### 9.1 MVP 정의
| 항목 | 내용 |
|------|------|
| MVP 기능 | 실시간 자막 + 키워드 하이라이트 |
| 검증 목표 | 5초 이내 자막 표시, 의원이름 90% 정확도 |
| 성공 기준 | 1회 본회의에서 사용 후 "유용하다" 평가 |
| 실패 기준 | 자막 지연 > 30초 또는 정확도 < 70% |

### 9.2 실패 시나리오
| 시나리오 | 확률 | 영향 | 대응 방안 |
|----------|------|------|----------|
| HLS 접근 차단 | 중 | 높음 | 관리자 협조, 내부 API 요청 |
| 정확도 미달 | 낮 | 중 | 프롬프트 개선, 사전 확대 |
| 비용 초과 | 낮 | 중 | 사용량 제한, 로컬 전환 |

### 9.3 학습 목표
| 성공 시 배울 것 | 실패 시 배울 것 |
|---------------|---------------|
| HLS 스트림 처리 파이프라인 | 스트림 접근 제약 패턴 |
| Whisper 한국어 최적화 방법 | 도메인 특화 STT 한계 |

### 9.4 피벗 옵션
| 옵션 | 트리거 | 방향 전환 내용 |
|------|--------|--------------|
| Plan B | HLS 접근 불가 | VOD 전용 자막 서비스로 전환 |
| Plan C | API 비용 과다 | 클라우드 GPU + 로컬 Whisper |

---

## Decision Log

- D1: API vs 로컬 → API 선택 (GPU 없음)
- D2: 화자 분리 방식 → 영상 + 자막 동시 표시 (기술 복잡도)
- D3: 클라우드 환경 → Railway + Supabase + Vercel
- D4: 프론트엔드 → Next.js
- D5: 실시간 통신 → WebSocket
